# Preguntas orientadoras
1. Los ARM Cortex-M son procesadores RISC de 32 bits de alta eficiencia debido a su direccionamiento de 32 bits y por utilizar un set de instrucciones con alta densidad de codigo.
    - M0 y M0+ son procesadores de bajo consumo, orientado a electronica de consumo. La inclusion del SysTick timer es opcional, por lo que no todos soportan directamente el uso de RTOS. Su arquitectura de memoria es Von Neumann, razon por la cual son mas baratos pero tambien con menos poder de procesamiento. La arquitectura ARM es la ARMv6-M
    - M1 tiene las mismas caracteristicas que M0 y M0+ y ademas la posibilidad de incluir TCM (*Tightly-Coupled Memory*). La principal diferencia radica en que su licencia IP esta orientada para su uso con FPGAs, donde el TCM cobra mayor sentido.
    - M3, M4 y M7 son procesadores de mayor capacidad de procesamiento, que incluyen siempre SysTick timer, lo que permite el soporte de RTOS. Son de arquitectura de memoria Harvard, siendo mas costosos pero con mayor poder de procesamiento. Su arquitectura ARM es ARMv7-M para el caso del M3, y ARMv7E-M para el caso del M4 y M7. Esta diferencia de arquitectura ARM del M3 hace que no ofrezca soporte de extensiones DSP y FPU. M4 y M7 soportan DSP, siendo la FPU opcional. Finalmente, el M7 puede incluir tambien el uso de memoria cache y de TCM.
# Cortex-M
1. La principal diferencia entre las familias M0, M3 y M4 son las siguientes:
    - Arquitectura de memoria: M0 posee arquitectura Von Neumann mientras que M3 y M4 poseen arquitectura Harvard, esto se traduce en un *trade off* entre el costo y el procesamiento, siendo los M0 mas baratos pero con menor procesamiento (los datos y las instrucciones usan el mismo bus), y los M3 y M4 mas caros pero con mayor procesamiento (buses dedicados para los datos y las instrucciones).
    - Soporte de RTOS directo: los M3 y M4 ofrecen soporte para RTOS, razon por la cual estos incluyen siempre SysTick timer. Los M0 pueden incluirlo pero aun asi no llegan a soportar todas sus caracteristicas de manera directa.
    - Soporte DSP y FPU: Solo el M4 incluye instrucciones para DSP, y puede llegar a incluir para FPU. Cuando incluyen FPU se los suele designar M4F.
2. A continuacion, se enumeran algunas de las caracteristicas que hacen de Thumb un ISA con alta densidad de codigo:
    - Thumb es un subconjunto de instrucciones de longitud de 2 bytes (16 bits), en lugar del juego estandar de ARM que son de 4 bytes (32 bits). Esto hace que tenga mayor densidad de codigo, obteniendo incluso mejor rendimiento que un codigo de 32 bits cuando el ancho de bus de memoria es menor a 32 bits.
    - En el caso de Thumb-2, permite a las instrucciones de 16-bit y las instrucciones de 32-bit de trabajar juntas, siendo compatibles sin tener que cambiar entre una u otra.
    - Modos de acceso a memoria especiales para un acceso efectivo a memoria.
    - Una simple instruccion puede manejar multiples accesos a memoria.
    - En el caso de M3 y M4, soporte de instrucciones de division por hardware y *Multiply and Accumulate* (MAC).
    - En el caso de M4, instrucciones *Single Instruction, Multiple Data* (SIMD).
3. Se denomina "load-store" a la arquitectura que tienen ciertos procesadores en la cual poseen un numero determinado de registros dentro del nucleo del procesador llamado *register bank*, cuyo proposito es el control y el procesamiento de los datos. Las instrucciones de procesamiento de datos que soporten esta arquitectura generalmente especifican un registro origen y un registro destino. En la arquitectura ARM, si un dato en memoria tiene que ser procesado, debe ser cargado desde la memoria hacia lo registros en el "banco de registros", procesados, y luego escritos nuevamente en la memoria de ser necesario. Las instrucciones involucradas en esta arquitectura en ARM son LDR (load) y STR (store), siendo las unicas instrucciones capaces de escribir y leer en memoria.
4. El mapa de memoria de la familia de microprocesadores ARM Cortex-M posee un direccionamiento de 32 bits, lo que significa que el espacio máximo de memoria permitido es de 4GB.
El mapa de memoria está unificado, lo que quiere decir que todas las direcciones correspondientes a código de programa, datos, periféricos, entre otros estan localizados dentro de esos 4GB.
Respecto al *endianess*, la mayoría de los Cortex-M usan *little endian*, pero en particular los M3 y M4 pueden operar tanto en *little endian* como en *big endian*.
5. La ventaja de utilizar dos *stack pointers* como el MSP y el PSP se enfatiza en sistemas que utilizan OS o RTOS, donde las excepciones, incluidas las del *kernel*, usan el MSP, y las tareas de la aplicación usan el PSP. Cada tarea tiene su propio *stack* dedicado y cada vez que existe un cambio de contexto, el OS actualiza el PSP apuntando al *stack* correspondiente.
Como se ha mencionado, esto tiene varios beneficios:
    - Si alguna tarea sufre una corrupción del *stack*, el *stack* usado por el *kernel* y otras tareas aún sigue intacto.
    - El *stack* de cada tarea no necesita incluir espacio para ISR, ya que éste se localiza únicamente en el *main stack*.
    - Facilita el desarrollo de un OS eficiente para procesadores Cortex-M.
    - Si existe soporte de MPU, éste se puede utilizar para disparar una *MemManage fault exception* cuando exista un *stack overflow* para evitar que una tarea escriba fuera del espacio de memoria inicialmente dedicado.
